"use strict";$(function(){var v,t=getCookie("username");console.log(t),v=t,$.ajax({type:"get",url:"http://jx.xuzhixiang.top/ap/api/cart-list.php",data:{id:v},success:function(a){console.log(a);for(var t=0;t<a.data.length;t++){var n=a.data[t].pimg,e='<img class="oimg" src = '.concat(n,">"),c=a.data[t].pname,p='<span class="sname">'.concat(c,"</span>"),o=a.data[t].pprice,d='<p class="price">'.concat(o,"</p>"),i=a.data[t].pnum,l='<p class="hej">'.concat(o*i,"元</p>"),u='<span class="cunshu">'.concat(i,"</span>"),s='<div class="number">'.concat('<input class="number1" type="button" value="-" >').concat(u).concat('<input class="number2" type="button" value="+" >',"</div>"),r="<tr>\n\t\t\t\t\t\t\t\t\t<td>".concat(e,"</td>\n\t\t\t\t\t\t\t\t\t<td>").concat(p,"</td>\n\t\t\t\t\t\t\t\t\t<td>").concat(d,"</td>\n\t\t\t\t\t\t\t\t\t<td>").concat(s,'</td>\n\t\t\t\t\t\t\t\t\t<td class="heji">').concat(l,"</td>\n\t\t\t\t\t\t\t\t\t<td>").concat('<input type="button" class="delect" value="删除">',"</td>\n\t\t\t\t\t\t\t\t</tr>");$("#shang").append(r)}del=document.querySelectorAll(".delect"),console.log(del);for(var h=function(e){m=getCookie("username"),console.log(m),del[e].onclick=function(){var t=a.data[e].pid;console.log(t),$.ajax({type:"get",url:"http://jx.xuzhixiang.top/ap/api/cart-delete.php",data:{uid:m,pid:t},success:function(t){var a=document.getElementsByClassName("delect")[e].parentNode.parentNode;a.parentNode.removeChild(a)}})},x=a.data[e].pnum,console.log(x),$(".number2").eq(e).on("click",function(){var t=a.data[e].pid;a.data[e].id,x++,console.log(m),console.log(v),$.ajax({type:"get",url:"http://jx.xuzhixiang.top/ap/api/cart-update-num.php",data:{uid:v,pid:t,pnum:x}}),$.ajax({type:"get",url:"http://jx.xuzhixiang.top/ap/api/cart-list.php",data:{id:v},success:function(t){t.data[e].pid,t.data[e].id;var a=t.data[e].pnum,n=a*t.data[e].pprice+"元";$(".cunshu").eq(e).html(a),$(".heji").eq(e).html(n)}})}),$(".number1").eq(e).on("click",function(){var t=a.data[e].pid;a.data[e].id,x--,console.log(m),console.log(v),$.ajax({type:"get",url:"http://jx.xuzhixiang.top/ap/api/cart-update-num.php",data:{uid:v,pid:t,pnum:x}}),$.ajax({type:"get",url:"http://jx.xuzhixiang.top/ap/api/cart-list.php",data:{id:v},success:function(t){t.data[e].pid,t.data[e].id;var a=t.data[e].pnum,n=a*t.data[e].pprice+"元";$(".cunshu").eq(e).html(a),$(".heji").eq(e).html(n)}})})},g=0;g<a.data.length;g++){var m,x;h(g)}}})});